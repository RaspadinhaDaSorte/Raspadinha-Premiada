<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéØ Raspadinha da Esperan√ßa</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: 'Arial', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      min-height: 100vh;
    }

    .top-bar {
      width: 100%;
      max-width: 360px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .saldo {
      background: #111;
      padding: 8px 12px;
      border-radius: 6px;
      color: #0f0;
      font-weight: bold;
    }

    .sair {
      background: #ff3333;
      padding: 8px 12px;
      border-radius: 6px;
      color: #fff;
      font-weight: bold;
      text-decoration: none;
    }

    h1 {
      color: #ffcc00;
      font-size: 30px;
      margin-bottom: 10px;
      text-align: center;
    }

    #tentativas {
      font-size: 18px;
      margin-bottom: 20px;
      color: #00ff00;
    }

    .tabuleiro {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 15px;
      width: 100%;
      max-width: 360px;
      margin-bottom: 30px;
    }

    .quadrado {
      width: 100%;
      aspect-ratio: 1;
      background: #222;
      border-radius: 16px;
      box-shadow: inset 0 0 10px #000, 0 0 10px #ffcc00;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s ease;
    }

    .quadrado:hover {
      background: #333;
      transform: scale(1.05);
    }

    .raspado {
      background: #444 !important;
      cursor: default;
      box-shadow: inset 0 0 15px #000;
      color: #888;
      transform: none !important;
    }

    #resultado {
      font-size: 20px;
      color: #ff3333;
      display: none;
      text-align: center;
      max-width: 400px;
      margin-bottom: 20px;
    }

    #btnJogarNovamente {
      display: none;
      padding: 12px 20px;
      background: #ffcc00;
      color: #000;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    footer {
      margin-top: 40px;
      font-size: 14px;
      color: #aaa;
      text-align: center;
    }
  </style>
</head>
<body>

  <div class="top-bar">
    <div class="saldo">üí∞ Saldo: R$ 10,00</div>
    <a href="login.html" class="sair">Sair</a>
  </div>

  <h1>üéâ Raspadinha da Esperan√ßa üéØ</h1>
  <div id="tentativas">Tentativas restantes: 3</div>

  <div class="tabuleiro" id="tabuleiro">
    <!-- Quadrados s√£o criados via JS -->
  </div>

  <div id="resultado"></div>

  <button id="btnJogarNovamente" onclick="jogarNovamente()">Jogar Novamente</button>

  <footer>
    Boa sorte! üçÄ Divirta-se com responsabilidade.<br>
    ¬© 2025 Raspadinha da Esperan√ßa
  </footer>

  <script>
    const tabuleiro = document.getElementById('tabuleiro');
    const tentativasEl = document.getElementById('tentativas');
    const resultadoEl = document.getElementById('resultado');
    const btnJogarNovamente = document.getElementById('btnJogarNovamente');

    const totalQuadrados = 9;
    let tentativasRestantes = 3;
    let quadrados = [];

    const valores = [];
    for (let i = 0; i < totalQuadrados; i++) {
      const val = (Math.random() * 1000).toFixed(2).replace('.', ',');
      valores.push(`R$ ${val}`);
    }

    for (let i = 0; i < totalQuadrados; i++) {
      const div = document.createElement('div');
      div.classList.add('quadrado');
      div.dataset.index = i;
      div.innerText = 'üîí';
      tabuleiro.appendChild(div);
      quadrados.push(div);
    }

    tabuleiro.addEventListener('click', rasparQuadrado);

    function rasparQuadrado(e) {
      const div = e.target;
      if (!div.classList.contains('quadrado')) return;
      if (div.classList.contains('raspado')) return;
      if (tentativasRestantes <= 0) return;

      tentativasRestantes--;
      tentativasEl.innerText = `Tentativas restantes: ${tentativasRestantes}`;

      div.innerText = '‚ùå';
      div.classList.add('raspado');

      if (tentativasRestantes === 0) {
        mostrarResultadoFinal();
      }
    }

    function mostrarResultadoFinal() {
      resultadoEl.style.display = 'block';
      resultadoEl.innerText = 'üò¢ Voc√™ perdeu! Veja os pr√™mios escondidos :';

      for (let i = 0; i < totalQuadrados; i++) {
        const div = quadrados[i];
        if (!div.classList.contains('raspado')) {
          div.innerText = valores[i];
          div.classList.add('raspado');
          div.style.color = '#ffcc00';
          div.style.fontWeight = 'bold';
          div.style.background = '#222';
          div.style.boxShadow = '0 0 15px #ffcc00';
        }
      }

      // Mostra o bot√£o para jogar novamente (somente se ainda n√£o foi mostrado)
      if (!sessionStorage.getItem("jogou")) {
        btnJogarNovamente.style.display = 'inline-block';
        sessionStorage.setItem("jogou", "1");
      }
    }

    function jogarNovamente() {
      window.location.href = "pagamento.html";
    }

    // Evita que o bot√£o apare√ßa ao atualizar
    window.addEventListener("load", () => {
      if (sessionStorage.getItem("jogou")) {
        btnJogarNovamente.style.display = "none";
      }
    });
  </script>
</body>
</html>
